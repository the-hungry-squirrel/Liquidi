import React from 'react';
import { View, Image, StyleSheet } from 'react-native';
import Svg, { Path, G } from 'react-native-svg';

interface AcornIconProps {
  color: string;
  size?: number;
  isEmpty?: boolean;
}

export const AcornIcon: React.FC<AcornIconProps> = ({ color, size = 360, isEmpty = false }) => {
  // Farben anpassen basierend auf der übergebenen Farbe
  const lighterColor = adjustColorBrightness(color, 40);

  // Leere Eichel soll 50% größer sein
  const actualSize = isEmpty ? size * 1.5 : size;

  if (isEmpty) {
    // Leere Eichel (kritisch) - neue SVG-Datei
    return (
      <View style={{ width: actualSize, height: actualSize }}>
        <Image
          source={require('../../assets/Eichel4Claud_Leer4.svg')}
          style={[styles.image, { width: actualSize, height: actualSize }]}
          resizeMode="contain"
        />
      </View>
    );
  }

  // Volle Eichel (gute Sparquote) - inline SVG mit dynamischer Farbe
  return (
    <View style={{ width: size, height: size }}>
      <Svg
        width={size}
        height={size}
        viewBox="0 0 1024 1024"
      >
        <G>
          <Path
            fill={color}
            d="m 356.34672,279.51358 h 10.59767 v 2.64942 h -10.59767 z m 102.52651,-67.33247 c 0,10.97425 -8.59984,19.87063 -19.20828,19.87063 -10.60844,0 -19.20828,-8.89638 -19.20828,-19.87063 0,-10.97425 8.59984,-19.87064 19.20828,-19.87064 10.60844,0 19.20828,8.89639 19.20828,19.87064 z m -71.30142,71.49418 c 0,10.97425 -8.59984,19.87064 -19.20828,19.87064 -10.60844,0 -19.20828,-8.89639 -19.20828,-19.87064 0,-10.97425 8.59984,-19.87063 19.20828,-19.87063 10.60844,0 19.20828,8.89638 19.20828,19.87063 z m 361.27559,75.44114 c 0,14.26652 -12.1584,25.83182 -27.15654,25.83182 -14.99813,0 -27.15653,-11.5653 -27.15653,-25.83182 0,-14.26652 12.15839,-25.83183 27.15653,-25.83183 14.99814,0 27.15654,11.5653 27.15654,25.83183 z M 680.36741,410.978 c 0,14.26652 -12.15839,25.83183 -27.15653,25.83183 -14.99814,0 -27.15653,-11.56531 -27.15653,-25.83183 0,-14.26652 12.15839,-25.83183 27.15653,-25.83183 14.99814,0 27.15653,11.56531 27.15653,25.83183 z M 579.64036,276.75418 c 0,14.26652 -12.15839,25.83183 -27.15653,25.83183 -14.99814,0 -27.15653,-11.56531 -27.15653,-25.83183 0,-14.26652 12.1584,-25.83182 27.15653,-25.83182 14.99813,0 27.15653,11.5653 27.15653,25.83182 z m -80.7697,-2.09698 c 0,18.65622 -14.53076,33.78008 -32.45537,33.78008 -17.92461,0 -32.45537,-15.12386 -32.45537,-33.78008 0,-18.65622 14.53076,-33.78008 32.45537,-33.78008 17.92461,0 32.45537,15.12386 32.45537,33.78008 z m 170.10735,-58.72965 c 0,0 -1.3247,-41.06598 38.41656,-75.5084 39.74127,-34.44243 84.78137,-35.76715 105.97671,-15.89651 21.19535,19.87064 22.65874,28.77876 -1.3247,19.87064 -46.36481,-17.22121 -76.83312,-6.62355 -100.67788,22.52004 -23.84476,29.1436 -23.84477,43.71539 -26.49418,66.23545 -2.64942,22.52005 -15.89651,-17.22122 -15.89651,-17.22122 z M 277.39905,616.02342 c 3.13218,62.98534 24.34921,114.4699 44.50522,137.73596 13.08707,23.16646 30.0181,22.37461 47.60081,18.19937 37.24459,1.16236 83.08853,-12.68615 169.58411,-76.46051 C 593.01902,646.50978 663.26467,573.00003 643.20517,524.78987 613.75863,470.89082 523.39506,421.47327 453.98679,401.96689 358.91151,380.64605 339.79622,402.14102 317.64417,427.65828 285.57368,465.27418 268.33918,558.8104 277.39905,616.02342 Z M 491.46703,267.59119 c 0,11.70587 -12.75149,21.19534 -28.48125,21.19534 -15.72975,0 -28.48124,-9.48948 -28.48124,-21.19534 0,-11.70586 12.75149,-21.19534 28.48124,-21.19534 15.72976,0 28.48125,9.48947 28.48125,21.19534 z m 39.7225,584.63936 c -53.82383,-2.65794 -93.95717,-7.69949 -132,-16.58183 -4.58412,-1.07032 -14.24765,-1.85932 -28,-2.28614 -20.7874,-0.64515 -21.05368,-0.68138 -26.30245,-3.57821 -5.13179,-2.83227 -10.11417,-8.41107 -13.44238,-15.05151 -0.82698,-1.65 -4.0888,-10.2 -7.24848,-19 -3.15968,-8.8 -6.56657,-17.62114 -7.57087,-19.60252 l -1.82599,-3.60253 34.39042,35.21065 c 21.99201,22.51652 142.72788,-7.20579 180.45657,-26.51397 94.43023,-48.326 145.66388,-125.75805 197.20983,-206.81464 18.29953,-28.77622 -122.21281,-123.4753 -71.64897,-80.91947 35.76224,30.09842 -15.23838,-14.40263 -28.14173,-23.97887 -67.43977,-50.05055 -157.98233,-89.03661 -233.37595,-100.48764 -13.17729,-2.00141 -52.68428,-1.68508 -61.31205,0.49093 -3.74663,0.94493 -7.15854,1.71806 -7.58203,1.71806 -0.42349,0 0.76752,-3.0375 2.64667,-6.75 3.39756,-6.71228 3.41266,-6.80309 2.70234,-16.25 -1.9207,-25.54453 1.18753,-41.16768 13.03126,-65.5 4.89443,-10.05534 14.82638,-26.5 16.00501,-26.5 0.26934,0 -1.11496,2.8125 -3.07623,6.25 -7.56779,13.264 -8.91538,16.85677 -8.90823,23.75 0.008,7.71584 2.51034,12.60352 8.29367,16.19959 3.06705,1.9071 5.06739,2.29687 11.69959,2.27971 7.01805,-0.0182 8.75238,-0.41138 14.12968,-3.20365 3.37132,-1.75063 6.36094,-2.9517 6.64359,-2.66905 0.79031,0.79031 -1.82154,9.82509 -4.37607,15.13747 -2.93222,6.09783 -11.78867,14.94498 -19.15729,19.13719 -3.16805,1.80239 -5.54639,3.62284 -5.2852,4.04546 0.26119,0.42261 8.25323,1.0477 17.76009,1.38908 42.00961,1.50854 82.68387,11.2018 134.67973,32.09613 9.01699,3.62344 17.16296,6.58807 18.10217,6.58807 1.32612,0 1.95043,-1.46513 2.7943,-6.55776 0.59766,-3.60677 2.24922,-8.54152 3.67012,-10.96612 2.8456,-4.85563 8.85941,-10.01409 10.49566,-9.00283 0.57377,0.35461 1.04322,2.78081 1.04322,5.39156 0,7.09793 3.50435,16.29049 8.27728,21.71282 7.15741,8.13124 13.37714,9.19637 28.35535,4.85586 12.67515,-3.67312 33.48183,-13.84712 41.35266,-20.22053 l 2.3893,-1.93475 -3.69665,-5.03584 c -8.42062,-11.47119 -11.7242,-24.35249 -9.26739,-36.13541 1.58642,-7.6085 2.87109,-10.4935 7.50628,-16.857 3.82831,-5.25575 6.08317,-5.5728 6.08317,-0.85534 0,5.89873 3.71787,15.91574 7.58333,20.43166 6.90292,8.0645 18.04061,11.12005 28.21512,7.74062 18.26699,-6.06732 41.4532,-32.24678 46.55665,-52.56694 1.68232,-6.69845 1.39205,-7.59831 -2.90893,-9.01777 -4.11442,-1.35788 -12.80267,-9.00261 -16.0153,-14.09174 -3.87325,-6.13562 -6.45074,-15.3773 -7.11684,-25.51763 -0.60249,-9.17218 -0.73383,-9.58781 -3.71929,-11.77022 -1.70211,-1.24427 -6.69474,-3.76612 -11.09474,-5.60412 -4.4,-1.838 -8.34755,-3.63462 -8.77234,-3.99251 -1.26657,-1.06707 3.08113,-13.74503 8.75777,-25.5378 15.83107,-32.88782 39.55068,-56.47343 68.54373,-68.15654 32.24088,-12.99187 61.68362,-9.52433 88.51036,10.42405 13.52774,10.05923 19.39324,18.22038 19.43854,27.0464 0.044,8.63302 -5.0946,16.40236 -13.9822,21.1394 -11.30373,6.02483 -22.67208,5.92271 -36.9631,-0.33202 -10.76247,-4.71039 -16.90419,-5.94182 -26.61354,-5.33608 -6.93026,0.43237 -9.53656,1.12533 -15.71569,4.1785 -16.77357,8.28797 -32.36635,28.16208 -38.73786,49.37417 -2.0922,6.96537 -2.11843,7.5054 -0.56236,11.57991 1.95301,5.11389 4.03348,7.10009 17.09669,16.32209 50.64748,35.75468 88.71282,76.80648 109.25846,117.83042 14.1385,28.23075 20.3706,54.64003 20.4164,86.51702 0.058,40.53531 -10.7957,77.8409 -31.27312,107.48675 -13.59257,19.67845 -35.23487,37.51605 -53.40174,44.01377 -6.513,2.3295 -7.36167,3.05082 -9.27967,7.88733 -9.41032,23.72947 -35.68277,68.03184 -56.07451,94.55662 -33.3476,43.37726 -64.8195,71.77581 -105.29468,95.01225 -7.213,4.14091 -13.05319,7.96967 -12.97819,8.50834 0.0803,0.57695 4.34637,0.92273 10.3817,0.84148 56.56264,-0.7615 110.60501,-0.55243 124.74535,0.48259 48.45648,3.54683 75.19066,7.64083 86.04051,13.17601 4.54647,2.31943 5.29892,3.33452 4.45133,6.00505 -2.87216,9.04938 -56.9459,17.06397 -141.99184,21.04546 -29.37416,1.37518 -123.7082,1.97794 -145,0.92651 z M 314.40491,613.98286 c 3.72037,-4.05563 7.32681,-12.664 10.9203,-26.06613 3.7521,-13.99369 14.03564,-48.15422 17.51543,-58.18387 4.02825,-11.61047 16.71091,-45.17134 22.86296,-60.5 13.4545,-33.5237 15.64951,-42.35545 12.54637,-50.48091 -2.92447,-7.65763 -8.28015,-10.26675 -14.48645,-7.05735 -3.93203,2.03333 -14.30812,13.57688 -20.25884,22.53826 -6.53669,9.84381 -17.4912,32.40036 -23.2146,47.80145 -8.05713,21.6809 -15.42652,51.54958 -19.20697,77.84727 -2.39347,16.64953 -2.43364,38.10284 -0.0856,45.70475 3.00646,9.73345 8.83342,13.38266 13.40737,8.39653 z"
          />
          <Path
            fill={lighterColor}
            fillOpacity={1}
            d="m 302.03364,439.80337 c -27.81889,68.88486 -27.81889,92.72962 -29.1436,143.06856 -1.32471,50.33894 1.32471,84.78137 17.22122,116.57439 15.8965,31.79301 10.59767,34.44243 35.76714,62.26132 25.16947,27.81888 47.68952,14.57179 90.0802,3.97412 42.39069,-10.59767 95.37905,-43.71539 135.12032,-75.50841 39.74126,-31.79301 80.80724,-79.48253 91.40491,-109.95084 10.59767,-30.4683 26.49418,-47.68952 3.97413,-70.20957 -22.52005,-22.52005 -18.54593,-22.52005 -45.04011,-43.7154 C 574.92368,445.1022 531.20828,415.9586 487.49289,398.73739 443.77749,381.51617 372.24321,372.24321 348.39845,385.4903 c -23.84476,13.24709 -46.36481,54.31307 -46.36481,54.31307 z"
          />
        </G>
      </Svg>
    </View>
  );
};

// Hilfsfunktion zum Anpassen der Helligkeit
function adjustColorBrightness(color: string, percent: number): string {
  const num = parseInt(color.replace('#', ''), 16);
  const amt = Math.round(2.55 * percent);
  const R = Math.min(255, Math.max(0, (num >> 16) + amt));
  const G = Math.min(255, Math.max(0, ((num >> 8) & 0x00FF) + amt));
  const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
  return '#' + (0x1000000 + (R << 16) + (G << 8) + B).toString(16).slice(1);
}

const styles = StyleSheet.create({
  image: {
    width: '100%',
    height: '100%'
  }
});
