import React from 'react';
import { View } from 'react-native';
import Svg, { Path, Ellipse, G } from 'react-native-svg';

interface AcornIconProps {
  color: string;
  size?: number;
  isEmpty?: boolean;
}

export const AcornIcon: React.FC<AcornIconProps> = ({ color, size = 360, isEmpty = false }) => {
  const mainColor = color;
  const lighterColor = adjustColorBrightness(color, 15);
  const secondaryColor = adjustColorBrightness(color, -10);
  const tertiaryColor = adjustColorBrightness(color, 5);

  // Leere Eichel soll 50% größer sein
  const actualSize = isEmpty ? size * 1.5 : size;

  if (isEmpty) {
    // Leere Eichel (kritisch) - vereinfachte Version
    return (
      <View style={{ width: actualSize, height: actualSize }}>
        <Svg
          width={actualSize}
          height={actualSize}
          viewBox="0 0 1024 1024"
        >
          <G>
            <Path
              id="path16-1"
              fill={mainColor}
              fillOpacity={1}
              stroke={mainColor}
              strokeWidth={14.6053}
              d="m 419.99197,428.49734 c 40.29041,-68.31461 77.09777,-150.43803 146.8778,-187.9111 37.91709,-19.9245 18.97542,118.97291 18.91713,68.2208 -37.19281,135.07579 -100.24608,267.71836 -198.19869,360.07594 -15.30164,21.10888 -46.12058,8.04295 -41.72965,-18.27479 4.04494,-80.30008 41.19617,-153.38375 74.13341,-222.11085 z M 615.26834,682.1733 c -14.77325,31.72221 -74.19153,-15.35366 -34.43245,-24.82602 13.3573,-1.96537 38.01287,5.56925 34.43245,24.82602 z m -46.25851,-79.38667 c -15.10143,37.70198 -88.36559,-7.23336 -52.32823,-32.93972 19.35296,-9.73503 57.5827,4.17448 52.32823,32.93972 z M 683,289.5 c -4.56423,42.46894 -66.57565,1.00168 -30.11155,-16.66792 11.21801,-5.15767 29.5336,0.66264 30.11155,16.66792 z m -78.39473,470.75605 c 69.50947,-1.56483 189.01669,-2.58576 242.21834,23.53149 -0.70342,22.6464 -174.07116,33.20755 -325.12136,19.00509 -34.39973,-7.58703 -39.70995,-19.43101 -19.17199,-20.78807 53.90061,-13.51948 46.54687,-19.86153 102.07501,-21.74851 z M 410.93442,436.11912 c 42.38963,-68.13795 81.444,-158.18278 158.32312,-184.87158 41.22149,14.196 12.88161,81.94661 8.20861,110.49506 -45.42008,122.57449 -101.40546,261.64938 -212.20266,326.49473 -48.65201,-1.68208 -19.00938,-84.05283 -13.72966,-109.97995 14.83896,-49.82212 35.76092,-96.98874 59.40059,-142.13826 z m -38.31014,234.04419 c 84.47619,-47.47418 137.92515,-138.60677 174.12808,-231.70459 16.3913,-45.33064 31.73329,-92.08492 37.02029,-141.1667 6.98677,-20.88881 -16.89397,-49.47404 -5.83334,-64.09932 35.27158,1.61223 67.20391,23.48037 99.16557,38.99898 19.19769,11.12529 10.36563,8.34484 -4.07962,-0.12159 -24.08097,-14.43894 -40.47896,17.93341 -24.83059,38.00449 -17.27346,6.68035 -34.37562,-31.36907 -39.04512,-23.40564 0.0129,58.49486 -18.67531,113.07989 -39.34828,165.12907 11.96914,0.79111 41.63176,20.1847 12.57558,19.36379 -36.70715,8.62916 -13.27489,55.51046 2.21142,76.6248 15.18413,-2.73939 40.99512,-22.4605 59.963,-3.06846 9.82465,12.01201 -33.02518,7.36423 -28.47924,30.30307 0.98257,29.42143 30.21787,49.77958 53.72924,58.1352 16.81114,-4.48725 29.50907,-32.67434 54.02885,-26.45656 13.87474,-4.64722 12.41451,-35.42028 32.68765,-18.35445 45.42519,17.2904 89.41953,63.68864 84.11242,118.77056 -4.74709,26.79658 -23.2478,68.12668 -53.84447,59.6021 -28.84201,-15.85156 -9.2272,-48.65893 -6.10007,-72.00778 -1.11173,-32.90903 -33.92973,-53.68057 -60.5645,-59.59258 -27.45537,13.32198 -38.66157,50.44 -63.20589,69.59356 -46.7646,50.50963 -111.76983,85.54872 -180.917,77.49781 -53.55075,-3.92627 -113.7784,-32.01432 -135.75658,-90.27072 -19.60808,-8.5611 30.34334,-15.87129 32.3826,-21.77504 z m 93.76745,10.4439 c 9.04422,16.2732 11.07757,-26.17943 27.73282,-25.34203 12.92915,-14.972 -45.43592,-10.14162 -31.02744,16.72883 l 1.3559,4.17982 z M 617.17847,453.50399 c 8.75405,-25.89399 44.80291,-26.51221 60.28743,-5.88408 -23.6787,-2.20796 -45.97975,24.2212 -31.05797,50.80742 -17.4393,-2.62819 -35.1317,-25.44338 -29.22946,-44.92334 z m 1.06229,-98.3785 c 7.81033,-25.69452 42.71357,-27.37999 58.52959,-7.48628 -27.10584,-6.30878 -49.83362,25.13797 -30.02886,51.34237 -11.31998,5.75292 -36.76838,-26.30979 -28.50073,-43.85609 z m 57.43285,183.17582 c 8.2734,-35.41313 41.04293,-11.49272 61.03448,-14.07505 12.02245,-12.47147 -3.29696,-46.10967 23.96932,-30.76905 17.65235,-10.25337 -2.31517,32.18402 -3.14539,43.37904 -5.09308,13.27882 -11.76457,47.23704 -17.46287,14.60606 -17.38883,-27.54286 -62.28329,-8.72552 -46.73006,24.72179 -8.30349,3.5764 -22.34227,-27.17932 -17.66548,-37.86279 z m 24.11315,-105.20993 c 11.15366,-23.35307 40.01205,-16.94973 57.83555,-4.63173 13.19561,8.79898 15.72621,-22.73687 15.07504,5.98507 -0.0988,16.0812 0.42788,44.47523 -9.84924,13.55586 -25.24038,-33.43582 -58.0915,5.13111 -44.14325,31.11816 -14.92168,-8.44752 -28.24905,-28.67482 -18.9181,-46.02736 z m -0.85951,-92.72578 c 9.94504,-25.5145 43.5255,-29.08686 50.46063,2.85069 7.77735,11.37038 -27.86579,-18.85707 -31.83506,3.60495 -6.66109,12.72257 13.24895,45.06445 -8.63332,20.25412 -6.25956,-7.00494 -12.43808,-16.77027 -9.99225,-26.70976 z M 540.07337,246.6421 c 15.85287,-19.265 32.74968,-8.49319 48.87394,2.87349 27.86663,-2.65015 56.9952,1.43207 82.60645,16.64501 57.28415,27.91605 102.29532,90.36338 103.17018,158.92812 3.02764,54.42698 -9.93343,107.64124 -30.90062,155.45341 47.17848,15.24398 96.24664,55.68699 99.83091,112.75682 1.33099,32.74555 -16.81285,67.28181 -45.03586,78.21114 -33.23049,0.76796 -36.34138,-44.12526 -21.81534,-66.34634 7.2312,-28.69794 -17.13199,-52.21254 -39.92482,-61.81096 -24.9365,-18.09185 -36.69856,15.77488 -50.46217,31.07249 -47.44704,60.90003 -113.39743,112.69431 -191.59794,111.37599 -56.57247,-0.0486 -121.81883,-22.82022 -151.6124,-81.10799 -16.22574,-38.06955 -3.99279,-80.66262 5.25205,-117.75137 33.44463,-113.10635 87.88501,-218.43293 160.08593,-306.19309 10.04021,-11.86793 20.52614,-23.29244 31.52969,-34.10672 z"
            />
            <Ellipse
              fill={lighterColor}
              fillOpacity={1}
              stroke={mainColor}
              strokeWidth={16.0504}
              strokeOpacity={1}
              cx="634.67303"
              cy="194.79836"
              rx="111.0873"
              ry="263.03006"
              transform="matrix(0.88148327,0.47221525,-0.43611068,0.89989304,0,0)"
            />
          </G>
        </Svg>
      </View>
    );
  }

  // Volle Eichel (gute Sparquote) - from acorn-full.svg
  return (
    <View style={{ width: size, height: size }}>
      <Svg
        width={size}
        height={size}
        viewBox="0 0 1024 1024"
      >
        <G>
          {/* Hauptform */}
          <Path
            fill={mainColor}
            d="m 547.54011,850.23891 c -17.76664,-0.49131 -62.60788,-3.33737 -77,-4.88717 -19.25885,-2.07387 -42.35792,-5.72742 -65.5,-10.36005 -17.21554,-3.44624 -21.68393,-3.96244 -38.1418,-4.40626 -16.34007,-0.44064 -19.27717,-0.77604 -23.78768,-2.71641 -9.85428,-4.2392 -15.41106,-12.79709 -24.47585,-37.69482 -7.66607,-21.05594 -9.75133,-25.56429 -13.99899,-30.26595 -5.55982,-6.15405 -14.00541,-19.52437 -20.04078,-31.7268 -14.77621,-29.87483 -24.10679,-66.91562 -27.64539,-109.74742 -1.45599,-17.6235 -0.59506,-62.79518 1.4933,-78.35076 5.26257,-39.19943 17.0563,-83.48597 31.06427,-116.64924 6.73959,-15.95567 18.68835,-39.90977 23.94331,-48 2.50075,-3.85 4.55644,-7.57215 4.56821,-8.27144 0.0118,-0.69929 1.1773,-3.01812 2.59006,-5.15295 4.10842,-6.20824 5.48446,-12.11096 4.38632,-18.8157 -3.21935,-19.65576 1.55422,-43.56263 13.43003,-67.25991 31.14658,-62.15069 80.86476,-99.02485 145.11499,-107.62648 14.28745,-1.91276 42.82366,-2.15129 60,-0.50152 34.46322,3.31015 69.50905,12.19463 100.74082,25.53884 5.90745,2.52404 11.08245,4.57924 11.5,4.56711 0.41755,-0.0121 1.79178,-3.24856 3.05384,-7.19208 6.01979,-18.80974 20.63599,-42.30213 35.66388,-57.32195 22.88155,-22.86927 51.0581,-35.463924 79.33934,-35.463924 22.38013,0 46.16773,10.704064 62.87558,28.293064 9.8397,10.35864 12.0702,17.23338 8.7514,26.97333 -2.2941,6.73285 -8.3748,13.09133 -16.20647,16.94686 -6.20123,3.05285 -7.38946,3.28675 -16.69736,3.28675 -9.38363,0 -10.54717,-0.23427 -18.29292,-3.68318 -10.87491,-4.84222 -17.01186,-6.11808 -27.26474,-5.6683 -9.76088,0.42821 -17.80391,3.63897 -26.56086,10.60304 -11.80607,9.38893 -27.41958,36.5485 -27.39592,47.65499 0.0105,4.91088 2.9715,8.21626 15.16956,16.93365 16.06803,11.48309 27.51822,20.53999 40.82385,32.29097 62.1304,54.871 91.99996,111.80246 91.99996,175.352 0,39.12525 -10.8406,77.04976 -30.42278,106.43031 -13.8453,20.77309 -35.32189,39.25823 -54.26409,46.70571 l -8.00827,3.14861 -5.22545,11.6161 c -20.11787,44.72179 -54.12855,93.95519 -89.57937,129.67391 -24.12982,24.31216 -40.12121,36.57583 -72.70811,55.75928 l -3.70811,2.18291 61.70811,0.007 c 50.6227,0.005 65.21114,0.32089 81.20811,1.75599 40.28201,3.61373 61.24936,7.25371 71.8023,12.46506 5.0452,2.49146 5.73452,3.19603 6.01922,6.15243 0.64936,6.74315 -6.02271,10.33271 -27.11958,14.59027 -44.66513,9.01348 -160.43398,15.12296 -243.20194,12.83413 z M 311.75549,608.68403 c 3.72037,-4.05563 7.32681,-12.664 10.9203,-26.06613 3.7521,-13.99369 14.03564,-48.15422 17.51543,-58.18387 4.02825,-11.61047 16.71091,-45.17134 22.86296,-60.5 13.4545,-33.5237 15.64951,-42.35545 12.54637,-50.48091 -2.92447,-7.65763 -8.28015,-10.26675 -14.48645,-7.05735 -3.93203,2.03333 -14.30812,13.57688 -20.25884,22.53826 -6.53669,9.84381 -17.4912,32.40036 -23.2146,47.80145 -8.05713,21.6809 -15.42652,51.54958 -19.20697,77.84727 -2.39347,16.64953 -2.43364,38.10284 -0.0856,45.70475 3.00646,9.73345 8.83342,13.38266 13.40737,8.39653 z"
          />

          {/* Zweite Ebene - Details */}
          <Path
            fill={secondaryColor}
            d="m 528.54011,846.93172 c -53.82383,-2.65794 -93.95717,-7.69949 -132,-16.58183 -4.58412,-1.07032 -14.24765,-1.85932 -28,-2.28614 -20.7874,-0.64515 -21.05368,-0.68138 -26.30245,-3.57821 -5.13179,-2.83227 -10.11417,-8.41107 -13.44238,-15.05151 -0.82698,-1.65 -4.0888,-10.2 -7.24848,-19 -3.15968,-8.8 -6.56657,-17.62114 -7.57087,-19.60252 l -1.82599,-3.60253 34.39042,35.21065 c 21.99201,22.51652 142.72788,-7.20579 180.45657,-26.51397 94.43023,-48.326 145.66388,-125.75805 197.20983,-206.81464 18.29953,-28.77622 -122.21281,-123.4753 -71.64897,-80.91947 35.76224,30.09842 -15.23838,-14.40263 -28.14173,-23.97887 -67.43977,-50.05055 -157.98233,-89.03661 -233.37595,-100.48764 -13.17729,-2.00141 -52.68428,-1.68508 -61.31205,0.49093 -3.74663,0.94493 -7.15854,1.71806 -7.58203,1.71806 -0.42349,0 0.76752,-3.0375 2.64667,-6.75 3.39756,-6.71228 3.41266,-6.80309 2.70234,-16.25 -1.9207,-25.54453 1.18753,-41.16768 13.03126,-65.5 4.89443,-10.05534 14.82638,-26.5 16.00501,-26.5 0.26934,0 -1.11496,2.8125 -3.07623,6.25 -7.56779,13.264 -8.91538,16.85677 -8.90823,23.75 0.008,7.71584 2.51034,12.60352 8.29367,16.19959 3.06705,1.9071 5.06739,2.29687 11.69959,2.27971 7.01805,-0.0182 8.75238,-0.41138 14.12968,-3.20365 3.37132,-1.75063 6.36094,-2.9517 6.64359,-2.66905 0.79031,0.79031 -1.82154,9.82509 -4.37607,15.13747 -2.93222,6.09783 -11.78867,14.94498 -19.15729,19.13719 -3.16805,1.80239 -5.54639,3.62284 -5.2852,4.04546 0.26119,0.42261 8.25323,1.0477 17.76009,1.38908 42.00961,1.50854 82.68387,11.2018 134.67973,32.09613 9.01699,3.62344 17.16296,6.58807 18.10217,6.58807 1.32612,0 1.95043,-1.46513 2.7943,-6.55776 0.59766,-3.60677 2.24922,-8.54152 3.67012,-10.96612 2.8456,-4.85563 8.85941,-10.01409 10.49566,-9.00283 0.57377,0.35461 1.04322,2.78081 1.04322,5.39156 0,7.09793 3.50435,16.29049 8.27728,21.71282 7.15741,8.13124 13.37714,9.19637 28.35535,4.85586 12.67515,-3.67312 33.48183,-13.84712 41.35266,-20.22053 l 2.3893,-1.93475 -3.69665,-5.03584 c -8.42062,-11.47119 -11.7242,-24.35249 -9.26739,-36.13541 1.58642,-7.6085 2.87109,-10.4935 7.50628,-16.857 3.82831,-5.25575 6.08317,-5.5728 6.08317,-0.85534 0,5.89873 3.71787,15.91574 7.58333,20.43166 6.90292,8.0645 18.04061,11.12005 28.21512,7.74062 18.26699,-6.06732 41.4532,-32.24678 46.55665,-52.56694 1.68232,-6.69845 1.39205,-7.59831 -2.90893,-9.01777 -4.11442,-1.35788 -12.80267,-9.00261 -16.0153,-14.09174 -3.87325,-6.13562 -6.45074,-15.3773 -7.11684,-25.51763 -0.60249,-9.17218 -0.73383,-9.58781 -3.71929,-11.77022 -1.70211,-1.24427 -6.69474,-3.76612 -11.09474,-5.60412 -4.4,-1.838 -8.34755,-3.63462 -8.77234,-3.99251 -1.26657,-1.06707 3.08113,-13.74503 8.75777,-25.5378 15.83107,-32.88782 39.55068,-56.47344 68.54373,-68.15655 32.24088,-12.991864 61.68362,-9.524324 88.51036,10.42405 13.52774,10.05923 19.39324,18.22038 19.43854,27.04641 0.044,8.63302 -5.0946,16.40236 -13.9822,21.1394 -11.30373,6.02483 -22.67208,5.92271 -36.9631,-0.33202 -10.76247,-4.71039 -16.90419,-5.94182 -26.61354,-5.33608 -6.93026,0.43237 -9.53656,1.12533 -15.71569,4.1785 -16.77357,8.28797 -32.36635,28.16208 -38.73786,49.37417 -2.0922,6.96537 -2.11843,7.5054 -0.56236,11.57991 1.95301,5.11389 4.03348,7.10009 17.09669,16.32209 50.64748,35.75468 88.71282,76.80648 109.25846,117.83042 14.1385,28.23075 20.3706,54.64003 20.4164,86.51702 0.058,40.53531 -10.7957,77.8409 -31.27312,107.48675 -13.59257,19.67845 -35.23487,37.51605 -53.40174,44.01377 -6.513,2.3295 -7.36167,3.05082 -9.27967,7.88733 -9.41032,23.72947 -35.68277,68.03184 -56.07451,94.55662 -33.3476,43.37726 -64.8195,71.77581 -105.29468,95.01225 -7.213,4.14091 -13.05319,7.96967 -12.97819,8.50834 0.0803,0.57695 4.34637,0.92273 10.3817,0.84148 56.56264,-0.7615 110.60501,-0.55243 124.74535,0.48259 48.45648,3.54683 75.19066,7.64083 86.04051,13.17601 4.54647,2.31943 5.29892,3.33452 4.45133,6.00505 -2.87216,9.04938 -56.9459,17.06397 -141.99184,21.04546 -29.37416,1.37518 -123.7082,1.97794 -145,0.92651 z"
          />

          {/* Körper der Eichel */}
          <Path
            d="m 274.74963,610.72459 c 3.13218,62.98534 24.34921,114.4699 44.50522,137.73596 13.08707,23.16646 30.0181,22.37461 47.60081,18.19937 37.24459,1.16236 83.08853,-12.68615 169.58411,-76.46051 C 590.3696,641.21095 660.61525,567.7012 640.55575,519.49104 611.10921,465.59199 520.74564,416.17444 451.33737,396.66806 c -95.07528,-21.32084 -114.19057,0.17413 -136.34262,25.69139 -32.07049,37.6159 -49.30499,131.15212 -40.24512,188.36514 z"
            fill={tertiaryColor}
          />

          {/* Blatt */}
          <Path
            d="m 666.32859,210.62872 c 0,0 -1.3247,-41.06598 38.41656,-75.50841 39.74127,-34.44243 84.78137,-35.767141 105.97671,-15.89651 21.19535,19.87064 22.65874,28.77877 -1.3247,19.87064 -46.36481,-17.22121 -76.83312,-6.62355 -100.67788,22.52005 -23.84476,29.1436 -23.84477,43.71539 -26.49418,66.23545 -2.64942,22.52005 -15.89651,-17.22122 -15.89651,-17.22122 z"
            fill={mainColor}
          />

          {/* Dekorative Kreise */}
          <Ellipse cx="463.76587" cy="269.35837" rx="32.455368" ry="33.780079" fill={lighterColor} />
          <Ellipse cx="549.83441" cy="271.45535" rx="27.156532" ry="25.831827" fill={mainColor} />
          <Ellipse cx="650.56146" cy="405.67917" rx="27.156532" ry="25.831827" fill={mainColor} />
          <Ellipse cx="719.04144" cy="353.8176" rx="27.156532" ry="25.831827" fill={mainColor} />
          <Ellipse cx="365.71411" cy="278.37646" rx="19.208279" ry="19.870636" fill={lighterColor} />
          <Ellipse cx="437.01553" cy="206.88228" rx="19.208279" ry="19.870636" fill={adjustColorBrightness(mainColor, 30)} />
          <Ellipse cx="460.33636" cy="262.29236" rx="28.481241" ry="21.195343" fill={adjustColorBrightness(mainColor, -20)} />
        </G>
      </Svg>
    </View>
  );
};

// Hilfsfunktion zum Anpassen der Helligkeit
function adjustColorBrightness(color: string, percent: number): string {
  const num = parseInt(color.replace('#', ''), 16);
  const amt = Math.round(2.55 * percent);
  const R = Math.min(255, Math.max(0, (num >> 16) + amt));
  const G = Math.min(255, Math.max(0, ((num >> 8) & 0x00FF) + amt));
  const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
  return '#' + (0x1000000 + (R << 16) + (G << 8) + B).toString(16).slice(1);
}
